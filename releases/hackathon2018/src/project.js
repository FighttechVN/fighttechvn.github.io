require=function a(s,c,r){function h(t,e){if(!c[t]){if(!s[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(l)return l(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var n=c[t]={exports:{}};s[t][0].call(n.exports,function(e){return h(s[t][1][e]||e)},n,n.exports,a,s,c,r)}return c[t].exports}for(var l="function"==typeof require&&require,e=0;e<r.length;e++)h(r[e]);return h}({Actions:[function(e,t,o){"use strict";cc._RF.push(t,"2e049okfgtHxKAs71Pp2Qq9","Actions"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AnhSang=null,e}return __extends(e,t),e.prototype.start=function(){this.AnhSang.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.2),cc.rotateBy(1,5),cc.delayTime(.2),cc.rotateBy(1,-5))));var e=cc.moveTo(1,this.node.x,this.node.y+6),t=cc.moveTo(1,this.node.x,this.node.y-6);this.node.runAction(cc.repeatForever(cc.sequence(t,e)))},__decorate([a(cc.Node)],e.prototype,"AnhSang",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Admob:[function(e,t,o){"use strict";cc._RF.push(t,"ad110a2QLlNXYh98geRlaRq","Admob"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.admobInit()},t.prototype.start=function(){this.cacheInterstitial(),this.showInterstitial()},t.prototype.admobInit=function(){if(cc.sys.isMobile){var o=this;sdkbox.PluginAdMob.setListener({adViewDidReceiveAd:function(e){o.showInfo("adViewDidReceiveAd name="+e)},adViewDidFailToReceiveAdWithError:function(e,t){o.showInfo("adViewDidFailToReceiveAdWithError name="+e+" msg="+t)},adViewWillPresentScreen:function(e){o.showInfo("adViewWillPresentScreen name="+e)},adViewDidDismissScreen:function(e){o.showInfo("adViewDidDismissScreen name="+e)},adViewWillDismissScreen:function(e){o.showInfo("adViewWillDismissScreen="+e)},adViewWillLeaveApplication:function(e){o.showInfo("adViewWillLeaveApplication="+e)}}),sdkbox.PluginAdMob.init()}},t.prototype.cacheInterstitial=function(){cc.sys.isMobile&&sdkbox.PluginAdMob.cache("gameover")},t.prototype.showInterstitial=function(){cc.sys.isMobile&&sdkbox.PluginAdMob.show("gameover")},t=__decorate([n],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],Background:[function(e,t,o){"use strict";cc._RF.push(t,"bff9cyfHlJNgKDoVEqaymAl","Background"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=e("./InGame"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.canvas=null,e.item1=null,e.item2=null,e.ngaTu=null,e.dauHem=null,e.trongHem=null,e.cuoiHem=null,e.items=[],e.isChallengeNgaTuActive=!1,e.isChallengeHemActive=!1,e.dauHemPoint=0,e.cuoiHemPoint=0,e.challengeHemCount=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.item1=this.node.getChildByName("Item1"),this.item2=this.node.getChildByName("Item2"),this.ngaTu=this.node.getChildByName("NgaTu"),this.dauHem=this.node.getChildByName("DauHem"),this.trongHem=this.node.getChildByName("TrongHem"),this.cuoiHem=this.node.getChildByName("CuoiHem"),this.items=[this.item1,this.item2],this.item2.y=this.item1.y+this.item1.height,this.prevCameraPosY=this.camera.y,this.oldLevel=this.canvas.node.getComponent(s.default).level},e.prototype.start=function(){},e.prototype.update=function(e){console.log(this.canvas.node.getComponent(s.default).isChallenge1Active),this.camera.y-this.prevCameraPosY>=this.items[0].height&&(this.scroll(),this.prevCameraPosY+=this.items[0].height,this.canvas.node.getComponent(s.default).level>this.oldLevel&&(this.canvas.node.getComponent(s.default).level%7==0&&0==this.canvas.node.getComponent(s.default).isChallenge1Active&&(this.isChallengeHemActive=!0),this.canvas.node.getComponent(s.default).level%3==0&&0==this.isChallengeHemActive&&(this.isChallengeNgaTuActive=!0),this.oldLevel=this.canvas.node.getComponent(s.default).level),this.changeBackground(this.item1),this.isChallengeHemActive&&this.challengeHem(),this.isChallengeNgaTuActive&&this.challengeNgaTu()),this.isChallengeHemActive&&this.canvas.node.getComponent(s.default).player.y+this.canvas.node.getComponent(s.default).player.getChildByName("LeftItem").height/2>this.dauHemPoint?this.canvas.node.getComponent(s.default).street.width=225:0==this.isChallengeHemActive&&this.canvas.node.getComponent(s.default).player.y-this.canvas.node.getComponent(s.default).player.getChildByName("LeftItem").height/2>this.cuoiHemPoint&&(this.canvas.node.getComponent(s.default).street.width=561)},e.prototype.scroll=function(){var e;this.items[0].y=this.items[1].y+this.items[1].height,e=[this.items[1],this.items[0]],this.items[0]=e[0],this.items[1]=e[1]},e.prototype.changeBackground=function(e){var t=e;if(t.name==this.item1.name||t.name==this.item2.name){for(var o=!0,i=0;i<this.items.length;++i)if(this.items[i].name!=this.item1.name&&this.items[i].name!=this.item2.name){o=!1;break}if(o)return;this.items[0].name==this.item1.name?t=this.item2:this.items[0].name==this.item2.name&&(t=this.item1)}t.name!=this.items[1].name&&(t.position=new cc.Vec2(this.items[1].x,this.items[1].y),this.removeBackgroundItem(this.items[1]),this.items[1]=t)},e.prototype.removeBackgroundItem=function(e){e.x=3e3},e.prototype.challengeNgaTu=function(){this.changeBackground(this.ngaTu),this.isChallengeNgaTuActive=!1},e.prototype.challengeHem=function(){if(this.canvas.getComponent(s.default).isSpawnAble=!1,3==this.challengeHemCount)return this.isChallengeHemActive=!1,this.canvas.node.getComponent(s.default).spawnEntity(this.canvas.node.getComponent(s.default).player.y+this.canvas.node.height,1),this.canvas.getComponent(s.default).isSpawnAble=!0,console.log("HET HEM"),void(this.challengeHemCount=0);0==this.challengeHemCount?(this.changeBackground(this.dauHem),console.log("DAU HEM"),this.dauHemPoint=this.items[1].y+260):1==this.challengeHemCount?(this.changeBackground(this.trongHem),console.log("TRONG HEM")):(this.changeBackground(this.cuoiHem),console.log("CUOI HEM"),this.cuoiHemPoint=this.items[1].y-260),this.challengeHemCount++},__decorate([a(cc.Node)],e.prototype,"camera",void 0),__decorate([a(cc.Canvas)],e.prototype,"canvas",void 0),e=__decorate([n],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./InGame":"InGame"}],Camera:[function(e,t,o){"use strict";cc._RF.push(t,"a2d2cO3q1BBqLUw0ffArO4G","Camera"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.canvas=null,e.timer=0,e.isZoomOnStartGameBegan=!1,e.isZoomOnStartGameComplete=!1,e}return __extends(e,t),e.prototype.start=function(){this.node.getComponent(cc.Camera).zoomRatio=1},e.prototype.update=function(e){this.zoomOnStartGame(e)},e.prototype.lateUpdate=function(){this.isZoomOnStartGameComplete&&(this.node.position=this.target.position,this.node.y=this.target.y+this.canvas.node.height/4)},e.prototype.zoomOnStartGame=function(e){0==this.isZoomOnStartGameComplete&&(0==this.isZoomOnStartGameBegan&&(this.node.getComponent(cc.Camera).zoomRatio=2,this.node.position=this.target.position,this.isZoomOnStartGameBegan=!0),.5<=this.timer&&(this.node.getComponent(cc.Camera).zoomRatio=2-(this.timer-.5)/2,this.node.y=this.target.y+this.canvas.node.height/4*(this.timer-.5)/2),2.5<=this.timer&&(this.node.getComponent(cc.Camera).zoomRatio=1,this.timer=0,this.isZoomOnStartGameComplete=!0),this.timer+=e)},e.prototype.zoomAndVibrate=function(){},__decorate([a(cc.Node)],e.prototype,"target",void 0),__decorate([a(cc.Canvas)],e.prototype,"canvas",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],CoupleEntity:[function(e,t,o){"use strict";cc._RF.push(t,"6ee96JNvo1Bq5Mbaoo16vFU","CoupleEntity"),Object.defineProperty(o,"__esModule",{value:!0});var i,n,a=cc._decorator,s=a.ccclass,c=(a.property,e("./InGame")),r=e("./GameSetting"),h=e("./Player");(n=i=o.SpriteType||(o.SpriteType={}))[n.Car1=0]="Car1",n[n.Car2=1]="Car2",n[n.Car3=2]="Car3",n[n.MotoBike=3]="MotoBike",n[n.Taxi=4]="Taxi";var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftItem=null,e.rightItem=null,e.canvasNode=null,e.isMoveUp=!1,e.isShrinkBack=!1,e.isGrownUp=!1,e.isChallenge1Active=!1,e.actionRepeatCount=0,e.moveSpeed=0,e.countFlag=!1,e.delayCountFlag=!0,e.challenge1_next1_flag=!1,e.newEntity=null,e.isAssociate=!1,e.isStaging=!1,e.isSwinging=!1,e.shrinkSpeed=0,e.swingingCount=0,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(){this.leftItem=this.node.getChildByName("LeftItem"),this.rightItem=this.node.getChildByName("RightItem");var e=this.canvasNode.getComponent(c.default).street;this.leftItem.x=-e.width/2,this.rightItem.x=e.width/2,this.canvasNode.getComponent(c.default).camera.getComponent(cc.Camera).addTarget(this.node);for(var t,o=this.canvasNode.getComponent(c.default).gameSetting.getComponent(r.default).entityList;(t=Math.floor(Math.random()*o.length))==i.MotoBike;);this.leftItem.getComponent(cc.Sprite).spriteFrame=o[t].getComponent(cc.Sprite).spriteFrame.clone(),this.rightItem.getComponent(cc.Sprite).spriteFrame=o[t].getComponent(cc.Sprite).spriteFrame.clone(),this.leftItem.setContentSize(o[t].getContentSize()),this.rightItem.setContentSize(o[t].getContentSize()),this.leftItem.getComponent(cc.BoxCollider).size=this.leftItem.getContentSize(),this.leftItem.getComponent(cc.BoxCollider).offset=new cc.Vec2(this.leftItem.width/2,0),this.rightItem.getComponent(cc.BoxCollider).size=this.leftItem.getComponent(cc.BoxCollider).size,this.rightItem.getComponent(cc.BoxCollider).offset=new cc.Vec2(-this.rightItem.width/2,0),this.node.getComponent(cc.BoxCollider).size=cc.size(this.canvasNode.width,this.leftItem.height),this.shrinkSpeed=3*this.canvasNode.getComponent(c.default).player.getComponent(h.default).shrinkSpeed},e.prototype.start=function(){},e.prototype.update=function(e){this.moveUp(e),this.shrinkBack(e),this.grownUP(e),this.runActionChallenge1(),this.node.y<this.canvasNode.getComponent(c.default).player.y-this.canvasNode.height&&(this.canvasNode.getComponent(c.default).entityList.splice(this.canvasNode.getComponent(c.default).entityList.indexOf(this.node),1),this.node.destroy())},e.prototype.runActionChallenge1=function(){if(this.isChallenge1Active)if(this.canvasNode.getComponent(c.default).isChallenge1Active=!0,this.challenge1_next1_flag)this.runActionChallenge1_next1();else{var e=this.canvasNode.getComponent(c.default).player;e.y>=this.node.y+this.leftItem.height&&(2<=this.actionRepeatCount&&this.spawnEntityChallenge1_next1(),this.isGrownUp=!0,this.isShrinkBack=!1,this.isMoveUp=!0,this.moveSpeed=e.getComponent(h.default).moveSpeed,this.countFlag=!0,this.delayCountFlag=!1);var t=this.canvasNode.getComponent(c.default).street;this.rightItem.x>=t.width/2&&(this.moveSpeed=1.5*e.getComponent(h.default).moveSpeed),this.node.y>e.y+this.leftItem.height&&this.isMoveUp&&(this.isShrinkBack=!0,this.isGrownUp=!1),this.rightItem.x-this.leftItem.x<=2*this.leftItem.width&&(this.countFlag&&this.delayCountFlag&&(this.actionRepeatCount++,this.countFlag=!1),this.delayCountFlag=!0,this.moveSpeed=.5*e.getComponent(h.default).moveSpeed)}},e.prototype.moveUp=function(e){if(this.isMoveUp){this.canvasNode.getComponent(c.default).player;this.node.y+=this.moveSpeed*e}},e.prototype.shrinkBack=function(e){if(this.isShrinkBack){if(this.rightItem.x-this.leftItem.x<=2*this.leftItem.width)return this.leftItem.x=-this.leftItem.width,this.rightItem.x=this.rightItem.width,void(this.isShrinkBack=!1);this.leftItem.x+=this.shrinkSpeed*e,this.rightItem.x-=this.shrinkSpeed*e}},e.prototype.grownUP=function(e){if(this.isGrownUp){var t=this.canvasNode.getComponent(c.default).street;if(this.rightItem.x>=t.width/2)return this.leftItem.x=-t.width/2,this.rightItem.x=t.width/2,void(this.isGrownUp=!1);this.leftItem.x-=this.shrinkSpeed*e,this.rightItem.x+=this.shrinkSpeed*e}},e.prototype.changeSprite=function(e){var t=this.canvasNode.getComponent(c.default).gameSetting.getComponent(r.default).entityList;this.leftItem.getComponent(cc.Sprite).spriteFrame=t[e].getComponent(cc.Sprite).spriteFrame.clone(),this.rightItem.getComponent(cc.Sprite).spriteFrame=t[e].getComponent(cc.Sprite).spriteFrame.clone(),this.leftItem.setContentSize(t[e].getContentSize()),this.rightItem.setContentSize(t[e].getContentSize()),this.leftItem.getComponent(cc.BoxCollider).size=this.leftItem.getContentSize(),this.leftItem.getComponent(cc.BoxCollider).offset=new cc.Vec2(this.leftItem.width/2,0),this.rightItem.getComponent(cc.BoxCollider).size=this.leftItem.getComponent(cc.BoxCollider).size,this.rightItem.getComponent(cc.BoxCollider).offset=new cc.Vec2(-this.rightItem.width/2,0)},e.prototype.spawnEntityChallenge1_next1=function(){this.challenge1_next1_flag||(this.newEntity=this.canvasNode.getComponent(c.default).spawnEntity(this.node.y+1.2*this.canvasNode.height,2),this.newEntity.getComponent("CoupleEntity").changeSprite(i.MotoBike),this.challenge1_next1_flag=!0)},e.prototype.runActionChallenge1_next1=function(){if(!this.isAssociate){var e=this.canvasNode.getComponent(c.default).street;this.rightItem.x>=e.width/2&&(this.moveSpeed=1.5*this.canvasNode.getComponent(c.default).player.getComponent(h.default).moveSpeed),this.node.y+this.leftItem.height/2>=this.newEntity.y-this.newEntity.getChildByName("LeftItem").height/2&&(this.node.y=this.newEntity.y-this.newEntity.getChildByName("LeftItem").height/2-this.leftItem.height/2,this.isMoveUp=!0,this.moveSpeed=1.5*this.canvasNode.getComponent(c.default).player.getComponent(h.default).moveSpeed,this.isAssociate=!0)}if(this.isAssociate&&(this.isStaging||(this.newEntity.getComponent("CoupleEntity").isMoveUp=!0,this.newEntity.getComponent("CoupleEntity").moveSpeed=this.moveSpeed,this.node.y-this.leftItem.height/2>this.canvasNode.getComponent(c.default).player.y+this.canvasNode.getComponent(c.default).player.getChildByName("LeftItem").height/2+2*this.leftItem.height&&(this.isStaging=!0,console.log("STAGING"))),this.isStaging))if(this.isSwinging){var t=this.canvasNode.getComponent(c.default).player;this.shrinkSpeed=t.getComponent(h.default).shrinkSpeed/2,this.rightItem.x-this.leftItem.x<=2*this.leftItem.width&&(this.swingingCount++,3<=this.swingingCount&&(this.isChallenge1Active=!1,this.isMoveUp=!1,this.newEntity.getComponent("CoupleEntity").isMoveUp=!1,this.canvasNode.getComponent(c.default).spawnEntity(this.canvasNode.getComponent(c.default).player.y+this.canvasNode.height,1),this.canvasNode.getComponent(c.default).isSpawnAble=!0,this.canvasNode.getComponent(c.default).isChallenge1Active=!1),this.isShrinkBack=!1,this.isGrownUp=!0,this.moveSpeed=1.5*t.getComponent(h.default).moveSpeed,this.newEntity.getComponent("CoupleEntity").moveSpeed=this.moveSpeed),this.newEntity.getChildByName("RightItem").x-this.newEntity.getChildByName("RightItem").width-this.rightItem.x<=2*this.canvasNode.getComponent(c.default).player.getChildByName("RightItem").width&&(this.isGrownUp=!1,this.isShrinkBack=!0,this.moveSpeed=.5*t.getComponent(h.default).moveSpeed,this.newEntity.getComponent("CoupleEntity").moveSpeed=this.moveSpeed)}else this.moveSpeed=.7*this.canvasNode.getComponent(c.default).player.getComponent(h.default).moveSpeed,this.newEntity.getComponent("CoupleEntity").moveSpeed=this.moveSpeed,this.isShrinkBack=!0,this.rightItem.x-this.leftItem.x<=2*this.leftItem.width&&(this.moveSpeed=1.5*this.canvasNode.getComponent(c.default).player.getComponent(h.default).moveSpeed,this.node.y>=this.newEntity.y&&(this.node.y=this.newEntity.y,this.moveSpeed=this.newEntity.getComponent("CoupleEntity").moveSpeed,this.node.y<=this.canvasNode.getComponent(c.default).player.y&&(this.node.y=this.canvasNode.getComponent(c.default).player.y,this.moveSpeed=this.canvasNode.getComponent(c.default).player.getComponent(h.default).moveSpeed,this.newEntity.getComponent("CoupleEntity").moveSpeed=this.moveSpeed,this.isSwinging=!0)))},e=__decorate([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./GameSetting":"GameSetting","./InGame":"InGame","./Player":"Player"}],GameOver:[function(e,t,o){"use strict";cc._RF.push(t,"9cc98H+c3RJAJM0UH4YqN77","GameOver"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scoreLabel=null,e.bestScoreLabel=null,e.gameOverForm=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.scoreLabel.string="Score: "+cc.sys.localStorage.getItem("score"),this.bestScoreLabel.string=cc.sys.localStorage.getItem("bestScore")},e.prototype.start=function(){},e.prototype.onReplayBtnClicked=function(){this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){cc.director.loadScene("InGame")})))},e.prototype.onMainMenuBtnClicked=function(){this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){cc.director.loadScene("GameStart")})))},e.prototype.onExitBtnClicked=function(){cc.game.end()},__decorate([a(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([a(cc.Label)],e.prototype,"bestScoreLabel",void 0),__decorate([a(cc.Node)],e.prototype,"gameOverForm",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],GameSetting:[function(e,t,o){"use strict";cc._RF.push(t,"21db7/6EWVAyK8sXxWxDCCW","GameSetting"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shrinkSpeed=0,e.shrinkDefault=0,e.playerMoveSpeed=0,e.entityList=[],e.levelFactor=0,e.moveSpeedFactor=0,e.scoreFactor=0,e}return __extends(e,t),e.prototype.start=function(){},__decorate([a],e.prototype,"shrinkSpeed",void 0),__decorate([a],e.prototype,"shrinkDefault",void 0),__decorate([a],e.prototype,"playerMoveSpeed",void 0),__decorate([a([cc.Node])],e.prototype,"entityList",void 0),__decorate([a],e.prototype,"levelFactor",void 0),__decorate([a],e.prototype,"moveSpeedFactor",void 0),__decorate([a],e.prototype,"scoreFactor",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],GameStart:[function(e,t,o){"use strict";cc._RF.push(t,"ff416F6kg5NrbJ+QCxkVyks","GameStart"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.backgroundAudio=null,e.audioId=0,e}return __extends(e,t),e.prototype.start=function(){this.audioId=cc.audioEngine.play(this.backgroundAudio,!0,1)},e.prototype.onPlayBtnClicked=function(){cc.audioEngine.stop(this.audioId),this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){cc.director.loadScene("InGame")})))},e.prototype.onQuitBtnClicked=function(){cc.game.end()},__decorate([a({url:cc.AudioClip})],e.prototype,"backgroundAudio",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],InGame:[function(e,t,o){"use strict";cc._RF.push(t,"a257arwXP1MkK6ityI0g11M","InGame"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=e("./CoupleEntity"),h=e("./Player"),c=e("./GameSetting"),r=e("./PlayerItem"),l=e("./CoupleEntity"),p=e("./Camera"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameSetting=null,e.pauseMenu=null,e.simpleEntityPrefab=null,e.coupleEntityPrefab=null,e.player=null,e.camera=null,e.scoreLabel=null,e.street=null,e.tutorialNode=null,e.Ui=null,e.backgroundAudio=null,e.backgound=null,e.entityList=[],e.oldLevel=0,e.level=0,e.levelFactor=0,e.score=0,e.moveSpeedFactor=0,e.isStarted=!1,e.backgroundAudioID=0,e.isSpawnAble=!0,e.isChallenge1Active=!1,e.isTutorialBegan=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this.pauseMenu.active=!1,this.levelFactor=this.gameSetting.getComponent(c.default).levelFactor,this.moveSpeedFactor=this.gameSetting.getComponent(c.default).moveSpeedFactor,this.backgroundAudioID=cc.audioEngine.play(this.backgroundAudio,!0,1)},e.prototype.start=function(){this.spawnEntity(.7*this.node.height),this.tutorialNode.active=!1},e.prototype.update=function(e){this.camera.getComponent(p.default).isZoomOnStartGameComplete&&0==this.isTutorialBegan&&(this.enableTutorial(),this.isTutorialBegan=!0),this.gainScore(),this.prevEntityPosY-this.camera.y<=this.node.height/2&&this.isSpawnAble&&this.spawnEntity(this.prevEntityPosY+this.node.height/2),this.levelUp(),this.level>this.oldLevel&&this.level%12==0&&(this.challenge1(),this.oldLevel=this.level,this.isSpawnAble=!1)},e.prototype.spawnEntity=function(e,t){var o=null,i=Math.floor(2*Math.random())+1,n="";switch(t||i){case 1:o=this.simpleEntityPrefab,n="SimpleEntity";break;case 2:o=this.coupleEntityPrefab,n="CoupleEntity"}var a=cc.instantiate(o);this.node.addChild(a),this.entityList.push(a),a.getComponent(n).canvasNode=this.node,a.getComponent(n).init();var s=this.computeD2(a),c=this.player.getComponent(h.default),r=s*c.moveSpeed/c.shrinkSpeed+Math.floor(100*Math.random()+50)+this.player.y;return a.position=new cc.Vec2(0,Math.max(e,r)),this.prevEntityPosY=a.y,this.Ui.setLocalZOrder(a.getLocalZOrder()+1),a},e.prototype.gameOver=function(){var e=cc.sys.localStorage.getItem("bestScore");null==e&&cc.sys.localStorage.setItem("bestScore",this.score),this.score>e&&cc.sys.localStorage.setItem("bestScore",this.score),cc.sys.localStorage.setItem("score",this.score),cc.audioEngine.stop(this.backgroundAudioID);1==this.player.getChildByName("LeftItem").getComponent(r.default).flag?this.node.runAction(cc.sequence(cc.delayTime(2),cc.fadeOut(.2),cc.callFunc(function(){cc.director.loadScene("GameOver")}))):this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){cc.director.loadScene("GameOver")})))},e.prototype.onPauseBtnClicked=function(){this.pauseMenu.active=!0,cc.director.pause()},e.prototype.onResumeBtnClicked=function(){cc.director.resume(),this.pauseMenu.active=!1},e.prototype.onReplayBtnClicked=function(){cc.director.resume(),cc.audioEngine.stop(this.backgroundAudioID),this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){cc.director.loadScene("InGame")})))},e.prototype.onMainMenuBtnClicked=function(){cc.director.resume(),cc.audioEngine.stop(this.backgroundAudioID),this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){cc.director.loadScene("GameStart")})))},e.prototype.onExitBtnClicked=function(){cc.director.resume(),cc.game.end()},e.prototype.computeD2=function(e){var t=this.player.getChildByName("RightItem"),o=0;switch(e.name){case"SimpleEntity":var i=e.getChildByName("Item");o=t.x-t.width/2<=i.width/2?i.width/2-(t.x-t.width/2):0;break;case"CoupleEntity":var n=e.getChildByName("RightItem");o=t.x+t.width/2>=n.x-n.width?t.x+t.width/2-(n.x-n.width):0}return o},e.prototype.gainScore=function(){this.score=Math.floor(this.player.y/this.gameSetting.getComponent(c.default).scoreFactor),this.updateScoreLabel()},e.prototype.levelUp=function(){this.score-this.level*this.levelFactor>=this.levelFactor&&(this.level++,this.player.getComponent(h.default).moveSpeed+=this.moveSpeedFactor)},e.prototype.updateScoreLabel=function(){this.scoreLabel.string=this.score.toString()+"m"},e.prototype.enableTutorial=function(){this.isStarted||(this.tutorialNode.active=!0,this.tutorialNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1),cc.scaleTo(.5,1)))))},e.prototype.disableTutorial=function(){this.isStarted=!0,this.tutorialNode.stopAllActions(),this.tutorialNode.active=!1},e.prototype.challenge1=function(){var e=this.spawnEntity(this.prevEntityPosY+.7*this.node.height,2);e.getComponent(s.default).changeSprite(l.SpriteType.MotoBike),e.getComponent(s.default).isChallenge1Active=!0},e.prototype.decreaseCoordinate=function(){if(1e3<=this.player.y){this.player.y-=1e3,this.backgound.y-=1e3;for(var e=0,t=this.entityList;e<t.length;e++){t[e].y-=1e3}}},__decorate([a(cc.Node)],e.prototype,"gameSetting",void 0),__decorate([a(cc.Node)],e.prototype,"pauseMenu",void 0),__decorate([a(cc.Prefab)],e.prototype,"simpleEntityPrefab",void 0),__decorate([a(cc.Prefab)],e.prototype,"coupleEntityPrefab",void 0),__decorate([a(cc.Node)],e.prototype,"player",void 0),__decorate([a(cc.Node)],e.prototype,"camera",void 0),__decorate([a(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([a(cc.Node)],e.prototype,"street",void 0),__decorate([a(cc.Node)],e.prototype,"tutorialNode",void 0),__decorate([a(cc.Node)],e.prototype,"Ui",void 0),__decorate([a({url:cc.AudioClip})],e.prototype,"backgroundAudio",void 0),__decorate([a(cc.Node)],e.prototype,"backgound",void 0),e=__decorate([n],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Camera":"Camera","./CoupleEntity":"CoupleEntity","./GameSetting":"GameSetting","./Player":"Player","./PlayerItem":"PlayerItem"}],LoadingBarCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"23512IMpdJAMpUoYedJc7MS","LoadingBarCtrl"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.resources=null,e.progress=0,e.completedCount=0,e.totalCount=0,e.progressSpeed=.5,e}return __extends(e,t),e.prototype.onLoad=function(){this.progressBar.progress=0,cc.loader.releaseAll(),this.resources||cc.loader.loadResDir("",this.progressCallback.bind(this),this.completeCallback.bind(this))},e.prototype.start=function(){},e.prototype.update=function(e){if(this.resources){var t=this.progressBar.progress;1<=t?this.completed():(t<this.progress&&(t+=this.progressSpeed*e),this.progressBar.progress=t)}},e.prototype.progressCallback=function(e,t,o){this.progress=e/t,this.resources=o,this.completedCount=e,this.totalCount=t},e.prototype.completeCallback=function(e,t){console.log("LOADED COMPLETED: "),console.log(t)},e.prototype.completed=function(){this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){cc.director.loadScene("GameStart")})))},__decorate([a(cc.ProgressBar)],e.prototype,"progressBar",void 0),e=__decorate([n],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],PlayerItem:[function(e,t,o){"use strict";cc._RF.push(t,"e956eumVWxM8a07mGcS2SGs","PlayerItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=e("./InGame"),c=e("./Player"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.sound=null,e.hug=null,e.flag=!1,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.start=function(){},e.prototype.onCollisionEnter=function(e,t){switch(e.tag){case 0:break;case 1:this.flag=!0,cc.audioEngine.play(this.sound,!1,1);this.node.parent.getChildByName("anim").active=!0;this.node.parent.getComponent(c.default).moveSpeed=0,this.canvas.node.getComponent(s.default).gameOver();break;case 2:cc.audioEngine.play(this.hug,!1,1),this.node.parent.getComponent(c.default).moveSpeed=0,this.canvas.node.getComponent(s.default).gameOver()}},__decorate([a(cc.Canvas)],e.prototype,"canvas",void 0),__decorate([a({url:cc.AudioClip})],e.prototype,"sound",void 0),__decorate([a({url:cc.AudioClip})],e.prototype,"hug",void 0),e=__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./InGame":"InGame","./Player":"Player"}],Player:[function(e,t,o){"use strict";cc._RF.push(t,"33b8fbnzRRKrbE7PqSV2tRc","Player"),Object.defineProperty(o,"__esModule",{value:!0});var i,n,a=cc._decorator,s=a.ccclass,c=a.property,r=e("./InGame"),h=e("./GameSetting"),l=e("./Camera");(n=i||(i={}))[n.None=0]="None",n[n.ShrinkBack=1]="ShrinkBack",n[n.GrownUp=2]="GrownUp";var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.leftItem=null,e.rightItem=null,e.shrinkSpeed=0,e.shrinkStatus=i.None,e.moveSpeed=0,e.animFlag1=!1,e.animFlag2=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this.init(),this.canvas.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart.bind(this)),this.canvas.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),this.canvas.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this)),cc.director.getCollisionManager().enabled=!0,this.node.getChildByName("anim").getComponent(cc.Animation).play("danhlon"),this.node.getChildByName("anim").active=!1},e.prototype.init=function(){this.leftItem=this.node.getChildByName("LeftItem"),this.rightItem=this.node.getChildByName("RightItem");var e=this.canvas.getComponent(r.default).gameSetting.getComponent(h.default);this.shrinkSpeed=e.shrinkSpeed,this.shrinkDefault=e.shrinkDefault,this.leftItem.x=-this.shrinkDefault/2,this.rightItem.x=this.shrinkDefault/2,this.moveSpeed=e.playerMoveSpeed},e.prototype.start=function(){},e.prototype.update=function(e){0!=this.canvas.node.getComponent(r.default).isStarted&&(this.grownUp(e),this.shrinkBack(e),this.node.y+=this.moveSpeed*e)},e.prototype.onTouchStart=function(){this.shrinkStatus=i.GrownUp},e.prototype.onTouchMove=function(){},e.prototype.onTouchEnd=function(){this.canvas.node.getComponent(r.default).camera.getComponent(l.default).isZoomOnStartGameComplete&&(this.shrinkStatus=i.ShrinkBack,this.canvas.node.getComponent(r.default).disableTutorial())},e.prototype.grownUp=function(e){if(this.shrinkStatus==i.GrownUp){var t=this.canvas.node.getComponent(r.default).street;if(Math.abs(this.leftItem.x)+Math.abs(this.rightItem.x)>=t.width-this.leftItem.width)this.animFlag1=!1;else if(this.leftItem.x-=this.shrinkSpeed*e,this.rightItem.x+=this.shrinkSpeed*e,!this.animFlag1)this.leftItem.getComponent(cc.Animation).play("playerRunToLeft").wrapMode=cc.WrapMode.Loop,this.rightItem.getComponent(cc.Animation).play("playerRunToRight").wrapMode=cc.WrapMode.Loop,this.animFlag1=!0}else this.animFlag1=!1},e.prototype.shrinkBack=function(e){this.shrinkStatus==i.ShrinkBack?Math.abs(this.leftItem.x)+Math.abs(this.rightItem.x)<=this.leftItem.width?this.animFlag2=!1:(this.leftItem.x+=this.shrinkSpeed*e,this.rightItem.x-=this.shrinkSpeed*e,this.animFlag2||(this.leftItem.getComponent(cc.Animation).play("playerRunToRight").wrapMode=cc.WrapMode.Loop,this.rightItem.getComponent(cc.Animation).play("playerRunToLeft").wrapMode=cc.WrapMode.Loop,this.animFlag2=!0)):this.animFlag2=!1},e.prototype.onCollisionEnter=function(e){},e.prototype.onCollisionStay=function(e){},e.prototype.onCollisionExit=function(e){e.tag},__decorate([c(cc.Canvas)],e.prototype,"canvas",void 0),e=__decorate([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Camera":"Camera","./GameSetting":"GameSetting","./InGame":"InGame"}],SimpleEntity:[function(e,t,o){"use strict";cc._RF.push(t,"5bbfdT2SG5LPrMqvoTJKfd6","SimpleEntity"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=(i.property,e("./InGame")),s=e("./GameSetting"),c=e("./CoupleEntity"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvasNode=null,e.item=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(){this.canvasNode.getComponent(a.default).camera.getComponent(cc.Camera).addTarget(this.node),this.item=this.node.getChildByName("Item");for(var e,t=this.canvasNode.getComponent(a.default).gameSetting.getComponent(s.default).entityList;(e=Math.floor(Math.random()*t.length))==c.SpriteType.MotoBike;);this.item.getComponent(cc.Sprite).spriteFrame=t[e].getComponent(cc.Sprite).spriteFrame.clone(),this.item.setContentSize(t[e].getContentSize()),this.item.getComponent(cc.BoxCollider).size.width=this.item.getContentSize().width,this.item.getComponent(cc.BoxCollider).size.height=this.item.getContentSize().height,this.node.getComponent(cc.BoxCollider).size=cc.size(this.canvasNode.width,this.item.height)},e.prototype.start=function(){},e.prototype.update=function(e){this.node.y<this.canvasNode.getComponent(a.default).player.y-this.canvasNode.height&&(this.canvasNode.getComponent(a.default).entityList.splice(this.canvasNode.getComponent(a.default).entityList.indexOf(this.node),1),this.node.destroy())},e=__decorate([n],e)}(cc.Component);o.default=r,cc._RF.pop()},{"./CoupleEntity":"CoupleEntity","./GameSetting":"GameSetting","./InGame":"InGame"}]},{},["Actions","Admob","Background","Camera","CoupleEntity","GameOver","GameSetting","GameStart","InGame","LoadingBarCtrl","Player","PlayerItem","SimpleEntity"]);